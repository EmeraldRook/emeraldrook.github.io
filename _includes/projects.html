<!-- Scroll wrapper — GSAP uses this for pin distance -->
<div id="projects-scroll-wrapper">
<section id="projects" class="relative min-h-screen">

  <!-- Background gradient layer — changes per project -->
  <div id="project-bg" class="absolute inset-0 transition-all duration-700 ease-out opacity-40" style="background: radial-gradient(ellipse 80% 60% at 70% 50%, {{ site.data.projects[0].gradient_from }} 0%, transparent 70%);"></div>

  <div class="relative z-10 max-w-[1400px] mx-auto px-6 md:px-10 lg:px-16 h-screen flex flex-col justify-center pt-24 md:pt-28 pb-12 md:pb-16">

    <!-- Section header -->
    <div class="mb-10 md:mb-14">
      <span class="text-label text-emerald mb-3 block">Selected Work</span>
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-300 text-text-primary leading-[1.1]">
        Projects we've<br>
        <span class="text-text-secondary">brought to life</span>
      </h2>
    </div>

    <!-- Interactive showcase: left list + right preview -->
    <div class="flex flex-col lg:flex-row gap-6 lg:gap-12 flex-1 min-h-0">

      <!-- LEFT: Project list -->
      <div class="lg:w-[40%] flex flex-col justify-center pb-8">
        <div class="flex flex-col" id="project-list">
          {% for project in site.data.projects %}
          {% if project.icon == "all" %}
          <!-- "All Work" item — styled differently -->
          <a href="{{ project.link }}"
             class="project-item group flex items-center justify-between py-2.5 md:py-3 cursor-pointer transition-all duration-300"
             data-index="{{ forloop.index0 }}"
             data-gradient-from="{{ project.gradient_from }}"
             data-gradient-from-light="{{ project.gradient_from_light }}"
             data-gradient-to="{{ project.gradient_to }}">
            <div class="flex items-center gap-4 md:gap-5">
              <span class="w-6 flex items-center justify-center">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-emerald">
                  <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/>
                </svg>
              </span>
              <div>
                <h3 class="text-lg md:text-xl lg:text-2xl font-400 text-emerald group-hover:text-emerald-light transition-colors duration-300 project-item-name">
                  All Work
                </h3>
                <span class="text-[10px] uppercase tracking-wider text-text-muted mt-0.5 block">Explore Portfolio</span>
              </div>
            </div>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-emerald transition-all duration-300 opacity-70 group-hover:opacity-100 group-hover:translate-x-1">
              <line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/>
            </svg>
          </a>
          {% else %}
          <a href="{{ project.link }}"
             class="project-item group flex items-center justify-between py-2.5 md:py-3 border-b border-border cursor-pointer transition-all duration-300{% if forloop.first %} is-active{% endif %}"
             data-index="{{ forloop.index0 }}"
             data-gradient-from="{{ project.gradient_from }}"
             data-gradient-from-light="{{ project.gradient_from_light }}"
             data-gradient-to="{{ project.gradient_to }}">
            <div class="flex items-center gap-4 md:gap-5">
              <span class="text-sm font-mono text-text-muted group-hover:text-emerald transition-colors duration-300 w-6">
                {% if forloop.index < 10 %}0{% endif %}{{ forloop.index }}
              </span>
              <div>
                <h3 class="text-lg md:text-xl lg:text-2xl font-400 text-text-secondary group-hover:text-text-primary transition-colors duration-300 project-item-name">
                  {{ project.short }}
                </h3>
                <span class="text-[10px] uppercase tracking-wider text-text-muted mt-0.5 block">{{ project.category }}</span>
              </div>
            </div>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-text-muted group-hover:text-emerald transition-all duration-300 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0">
              <line x1="7" y1="17" x2="17" y2="7"/><polyline points="7 7 17 7 17 17"/>
            </svg>
          </a>
          {% endif %}
          {% endfor %}
        </div>
      </div>

      <!-- RIGHT: Project preview -->
      <div class="lg:w-[60%] relative flex items-center justify-center min-h-0" id="project-preview-area">

        {% for project in site.data.projects %}
        <div class="project-preview absolute inset-0 flex flex-col items-center justify-center transition-all duration-500{% if forloop.first %} opacity-100 scale-100{% else %} opacity-0 scale-95 pointer-events-none{% endif %}"
             data-index="{{ forloop.index0 }}">

          {% if project.icon == "all" %}
          <!-- "All Work" preview — portfolio grid -->
          <div class="relative w-full max-w-lg mx-auto">
            <div class="absolute inset-0 rounded-3xl blur-[60px] opacity-30" style="background: linear-gradient(135deg, {{ project.gradient_from }}, {{ project.gradient_to }});"></div>

            <div class="relative">
              <p class="text-text-secondary text-sm font-light leading-relaxed text-center mb-5 max-w-sm mx-auto">
                From SaaS platforms to enterprise tools, we deliver software that solves real problems.
              </p>

              <div class="grid grid-cols-2 gap-3">
                <div class="bg-bg-card border border-border rounded-xl p-4 hover:border-emerald/30 transition-colors duration-300">
                  <div class="w-8 h-8 rounded-lg bg-purple-500/10 flex items-center justify-center mb-3">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#a855f7" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                  </div>
                  <div class="text-sm font-medium text-text-primary">DataLens</div>
                  <div class="text-[10px] text-text-muted mt-0.5">Business Intelligence</div>
                </div>
                <div class="bg-bg-card border border-border rounded-xl p-4 hover:border-emerald/30 transition-colors duration-300">
                  <div class="w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center mb-3">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 3v18"/><path d="M3 9h18"/></svg>
                  </div>
                  <div class="text-sm font-medium text-text-primary">FormForge</div>
                  <div class="text-[10px] text-text-muted mt-0.5">No-Code Tools</div>
                </div>
                <div class="bg-bg-card border border-border rounded-xl p-4 hover:border-emerald/30 transition-colors duration-300">
                  <div class="w-8 h-8 rounded-lg bg-cyan-500/10 flex items-center justify-center mb-3">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#06b6d4" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
                  </div>
                  <div class="text-sm font-medium text-text-primary">StackLayer</div>
                  <div class="text-[10px] text-text-muted mt-0.5">Infrastructure</div>
                </div>
                <div class="bg-bg-card border border-border rounded-xl p-4 hover:border-emerald/30 transition-colors duration-300">
                  <div class="w-8 h-8 rounded-lg bg-rose-500/10 flex items-center justify-center mb-3">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#f43f5e" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
                  </div>
                  <div class="text-sm font-medium text-text-primary">PulseCheck</div>
                  <div class="text-[10px] text-text-muted mt-0.5">HealthTech</div>
                </div>
              </div>

              <div class="text-center mt-5">
                <span class="inline-flex items-center gap-2 text-sm text-emerald font-medium">
                  View complete portfolio
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                </span>
              </div>
            </div>
          </div>

          {% else %}
          <!-- Regular project mockup -->
          <div class="relative w-full max-w-md mx-auto">
            <div class="absolute inset-0 rounded-3xl blur-[60px] opacity-30" style="background: linear-gradient(135deg, {{ project.gradient_from }}, {{ project.gradient_to }});"></div>

            <div class="relative bg-bg-card border border-border rounded-2xl overflow-hidden shadow-2xl">
              <!-- Browser bar -->
              <div class="flex items-center gap-2 px-4 py-2.5 bg-bg-elevated border-b border-border">
                <div class="flex gap-1.5">
                  <div class="w-2.5 h-2.5 rounded-full bg-red-500/60"></div>
                  <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/60"></div>
                  <div class="w-2.5 h-2.5 rounded-full bg-green-500/60"></div>
                </div>
                <div class="flex-1 mx-4">
                  <div class="bg-bg rounded-md px-3 py-1 text-xs text-text-muted text-center">{{ project.short | downcase }}.app</div>
                </div>
              </div>

              <!-- App content area -->
              <div class="p-5 md:p-6 aspect-[4/3] flex flex-col justify-between" style="background: linear-gradient(160deg, {{ project.gradient_from }}33, {{ project.gradient_to }}1a);">

                {% if project.icon == "sync" %}
                <div class="space-y-3">
                  <div class="flex items-center gap-3">
                    <div class="w-7 h-7 rounded-lg flex items-center justify-center" style="background: {{ project.gradient_to }}33;">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="{{ project.gradient_to }}" stroke-width="2"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/></svg>
                    </div>
                    <div class="text-sm font-semibold text-text-primary">Real-time Sync</div>
                  </div>
                  <div class="grid grid-cols-3 gap-2">
                    <div class="h-16 rounded-lg bg-white/[0.04] border border-white/[0.06]"></div>
                    <div class="h-16 rounded-lg bg-white/[0.06] border border-white/[0.08]"></div>
                    <div class="h-16 rounded-lg bg-white/[0.04] border border-white/[0.06]"></div>
                  </div>
                  <div class="h-2.5 w-3/4 rounded bg-white/[0.06]"></div>
                  <div class="h-2.5 w-1/2 rounded bg-white/[0.04]"></div>
                </div>
                <div class="flex gap-2 mt-3">
                  <div class="h-7 px-3 rounded-full text-xs flex items-center font-medium" style="background: {{ project.gradient_to }}44; color: {{ project.gradient_to }};">Connected</div>
                  <div class="h-7 px-3 rounded-full bg-white/[0.05] text-xs flex items-center text-text-muted">3 devices</div>
                </div>

                {% elsif project.icon == "payment" %}
                <div class="space-y-3">
                  <div class="flex items-center justify-between">
                    <div class="text-sm font-semibold text-text-primary">Invoice #1042</div>
                    <div class="h-5 px-2.5 rounded-full text-[10px] flex items-center font-medium" style="background: {{ project.gradient_to }}33; color: {{ project.gradient_to }};">Paid</div>
                  </div>
                  <div class="text-2xl font-light text-text-primary">$4,280<span class="text-sm text-text-muted">.00</span></div>
                  <div class="space-y-2">
                    <div class="flex justify-between text-xs text-text-muted"><span>Design sprint</span><span>$2,400</span></div>
                    <div class="h-px bg-white/[0.06]"></div>
                    <div class="flex justify-between text-xs text-text-muted"><span>Engineering</span><span>$1,880</span></div>
                  </div>
                </div>
                <div class="h-9 rounded-lg flex items-center justify-center text-sm font-medium mt-3" style="background: {{ project.gradient_to }}; color: white;">Send Receipt</div>

                {% elsif project.icon == "chart" %}
                <div class="space-y-3">
                  <div class="text-sm font-semibold text-text-primary">DORA Metrics</div>
                  <div class="grid grid-cols-2 gap-2">
                    <div class="p-2.5 rounded-lg bg-white/[0.04] border border-white/[0.06]">
                      <div class="text-[10px] text-text-muted uppercase">Deploy Freq</div>
                      <div class="text-base font-light text-text-primary mt-1">4.2<span class="text-xs text-text-muted">/day</span></div>
                    </div>
                    <div class="p-2.5 rounded-lg bg-white/[0.04] border border-white/[0.06]">
                      <div class="text-[10px] text-text-muted uppercase">Lead Time</div>
                      <div class="text-base font-light text-text-primary mt-1">2.1<span class="text-xs text-text-muted">hrs</span></div>
                    </div>
                  </div>
                  <div class="flex items-end gap-1 h-12">
                    <div class="flex-1 rounded-t" style="height:40%; background: {{ project.gradient_to }}44;"></div>
                    <div class="flex-1 rounded-t" style="height:65%; background: {{ project.gradient_to }}66;"></div>
                    <div class="flex-1 rounded-t" style="height:45%; background: {{ project.gradient_to }}44;"></div>
                    <div class="flex-1 rounded-t" style="height:80%; background: {{ project.gradient_to }}88;"></div>
                    <div class="flex-1 rounded-t" style="height:55%; background: {{ project.gradient_to }}55;"></div>
                    <div class="flex-1 rounded-t" style="height:90%; background: {{ project.gradient_to }}aa;"></div>
                    <div class="flex-1 rounded-t" style="height:70%; background: {{ project.gradient_to }}77;"></div>
                  </div>
                </div>
                <div class="h-2.5 w-2/3 rounded bg-white/[0.04] mt-3"></div>

                {% elsif project.icon == "shield" %}
                <div class="space-y-3">
                  <div class="flex items-center gap-2">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="{{ project.gradient_to }}" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                    <div class="text-sm font-semibold text-text-primary">Vault</div>
                  </div>
                  <div class="space-y-2">
                    <div class="flex items-center gap-3 p-2.5 rounded-lg bg-white/[0.04] border border-white/[0.06]">
                      <div class="w-5 h-5 rounded bg-white/[0.08] flex items-center justify-center text-[9px] text-text-muted">K</div>
                      <div class="flex-1"><div class="text-xs text-text-primary">API_SECRET</div><div class="text-[10px] text-text-muted">************</div></div>
                    </div>
                    <div class="flex items-center gap-3 p-2.5 rounded-lg bg-white/[0.04] border border-white/[0.06]">
                      <div class="w-5 h-5 rounded bg-white/[0.08] flex items-center justify-center text-[9px] text-text-muted">K</div>
                      <div class="flex-1"><div class="text-xs text-text-primary">DB_PASSWORD</div><div class="text-[10px] text-text-muted">************</div></div>
                    </div>
                  </div>
                </div>
                <div class="h-7 px-3 rounded-full text-xs flex items-center font-medium mt-3 w-fit" style="background: {{ project.gradient_to }}33; color: {{ project.gradient_to }};">Encrypted</div>

                {% elsif project.icon == "rocket" %}
                <div class="space-y-3">
                  <div class="text-sm font-semibold text-text-primary">Pipeline #847</div>
                  <div class="space-y-2.5">
                    <div class="flex items-center gap-3">
                      <div class="w-4 h-4 rounded-full flex items-center justify-center" style="background: #22c55e33;"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div></div>
                      <div class="text-xs text-text-primary flex-1">Build</div>
                      <div class="text-[10px] text-text-muted">12s</div>
                    </div>
                    <div class="flex items-center gap-3">
                      <div class="w-4 h-4 rounded-full flex items-center justify-center" style="background: #22c55e33;"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div></div>
                      <div class="text-xs text-text-primary flex-1">Test</div>
                      <div class="text-[10px] text-text-muted">45s</div>
                    </div>
                    <div class="flex items-center gap-3">
                      <div class="w-4 h-4 rounded-full flex items-center justify-center" style="background: {{ project.gradient_to }}33;"><div class="w-1.5 h-1.5 rounded-full animate-pulse" style="background: {{ project.gradient_to }};"></div></div>
                      <div class="text-xs text-text-primary flex-1">Deploy</div>
                      <div class="text-[10px] text-text-muted">running...</div>
                    </div>
                  </div>
                </div>
                <div class="h-2 rounded-full bg-white/[0.06] overflow-hidden mt-3"><div class="h-full rounded-full w-[75%]" style="background: {{ project.gradient_to }};"></div></div>
                {% endif %}
              </div>
            </div>
          </div>

          <!-- Description + tech tags below mockup -->
          <div class="mt-4 text-center">
            <p class="text-xs text-text-secondary font-light leading-relaxed max-w-md mx-auto">{{ project.description }}</p>
            <div class="flex flex-wrap justify-center gap-1.5 mt-3">
              {% for tech in project.tech %}
              <span class="text-[10px] font-medium uppercase tracking-wider text-text-muted px-2 py-0.5 rounded-full border border-border-subtle">{{ tech }}</span>
              {% endfor %}
            </div>
          </div>
          {% endif %}
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Progress dots (right edge) -->
    <div id="project-progress-dots" class="hidden lg:flex fixed right-8 top-1/2 -translate-y-1/2 flex-col gap-2 z-40" aria-hidden="true">
      {% for project in site.data.projects %}
      {% unless project.icon == "all" %}
      <div class="project-dot w-2 h-2 rounded-full bg-text-muted/30 transition-all duration-300{% if forloop.first %} bg-emerald scale-125{% endif %}" data-dot-index="{{ forloop.index0 }}"></div>
      {% endunless %}
      {% endfor %}
    </div>
  </div>
</section>
</div>
